/*
 Highcharts JS v8.2.0 (2020-08-27)

 Highcharts Drilldown module

 Author: Torstein Honsi
 License: www.highcharts.com/license

*/
(function(d){"object"===typeof module&&module.exports?(d["default"]=d,module.exports=d):"function"===typeof define&&define.amd?define("highcharts/modules/drilldown",["highcharts"],function(p){d(p);d.Highcharts=p;return d}):d("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(d){function p(d,n,p,t){d.hasOwnProperty(n)||(d[n]=t.apply(null,p))}d=d?d._modules:{};p(d,"Extensions/Drilldown.js",[d["Core/Axis/Axis.js"],d["Core/Chart/Chart.js"],d["Core/Color.js"],d["Core/Globals.js"],d["Core/Options.js"],
d["Core/Series/Point.js"],d["Core/Renderer/SVG/SVGRenderer.js"],d["Core/Axis/Tick.js"],d["Core/Utilities.js"]],function(d,n,p,t,x,z,F,B,l){x=x.defaultOptions;var q=l.addEvent,G=l.removeEvent,C=l.animObject,u=l.extend,y=l.fireEvent,H=l.format,v=l.merge,D=l.objectEach,w=l.pick,I=l.syncTimeout,J=t.noop,r=t.seriesTypes;l=r.pie;r=r.column;var E=1;u(x.lang,{drillUpText:"\u25c1 Back to {series.name}"});x.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},
activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};F.prototype.Element.prototype.fadeIn=function(a){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:w(this.newOpacity,1)},a||{duration:250})};n.prototype.addSeriesAsDrilldown=function(a,b){this.addSingleSeriesAsDrilldown(a,b);this.applyDrilldown()};n.prototype.addSingleSeriesAsDrilldown=function(a,b){var c=a.series,
e=c.xAxis,f=c.yAxis,g=[],k=[],h;var m=this.styledMode?{colorIndex:w(a.colorIndex,c.colorIndex)}:{color:a.color||c.color};this.drilldownLevels||(this.drilldownLevels=[]);var d=c.options._levelNumber||0;(h=this.drilldownLevels[this.drilldownLevels.length-1])&&h.levelNumber!==d&&(h=void 0);b=u(u({_ddSeriesId:E++},m),b);var l=c.points.indexOf(a);c.chart.series.forEach(function(a){a.xAxis!==e||a.isDrilling||(a.options._ddSeriesId=a.options._ddSeriesId||E++,a.options._colorIndex=a.userOptions._colorIndex,
a.options._levelNumber=a.options._levelNumber||d,h?(g=h.levelSeries,k=h.levelSeriesOptions):(g.push(a),a.purgedOptions=v({_ddSeriesId:a.options._ddSeriesId,_levelNumber:a.options._levelNumber,selected:a.options.selected},a.userOptions),k.push(a.purgedOptions)))});a=u({levelNumber:d,seriesOptions:c.options,seriesPurgedOptions:c.purgedOptions,levelSeriesOptions:k,levelSeries:g,shapeArgs:a.shapeArgs,bBox:a.graphic?a.graphic.getBBox():{},color:a.isNull?(new p(m.color)).setOpacity(0).get():m.color,lowerSeriesOptions:b,
pointOptions:c.options.data[l],pointIndex:l,oldExtremes:{xMin:e&&e.userMin,xMax:e&&e.userMax,yMin:f&&f.userMin,yMax:f&&f.userMax},resetZoomButton:this.resetZoomButton},m);this.drilldownLevels.push(a);e&&e.names&&(e.names.length=0);b=a.lowerSeries=this.addSeries(b,!1);b.options._levelNumber=d+1;e&&(e.oldPos=e.pos,e.userMin=e.userMax=null,f.userMin=f.userMax=null);c.type===b.type&&(b.animate=b.animateDrilldown||J,b.options.animation=!0)};n.prototype.applyDrilldown=function(){var a=this.drilldownLevels;
if(a&&0<a.length){var b=a[a.length-1].levelNumber;this.drilldownLevels.forEach(function(a){a.levelNumber===b&&a.levelSeries.forEach(function(a){a.options&&a.options._levelNumber===b&&a.remove(!1)})})}this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton);this.pointer.reset();this.redraw();this.showDrillUpButton();y(this,"afterDrilldown")};n.prototype.getDrilldownBackText=function(){var a=this.drilldownLevels;if(a&&0<a.length)return a=a[a.length-1],a.series=a.seriesOptions,
H(this.options.lang.drillUpText,a)};n.prototype.showDrillUpButton=function(){var a=this,b=this.getDrilldownBackText(),c=a.options.drilldown.drillUpButton,e;if(this.drillUpButton)this.drillUpButton.attr({text:b}).align();else{var f=(e=c.theme)&&e.states;this.drillUpButton=this.renderer.button(b,null,null,function(){a.drillUp()},e,f&&f.hover,f&&f.select).addClass("highcharts-drillup-button").attr({align:c.position.align,zIndex:7}).add().align(c.position,!1,c.relativeTo||"plotBox")}};n.prototype.drillUp=
function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){for(var a=this,b=a.drilldownLevels,c=b[b.length-1].levelNumber,e=b.length,f=a.series,g,k,h,m,d=function(b){f.forEach(function(a){a.options._ddSeriesId===b._ddSeriesId&&(c=a)});var c=c||a.addSeries(b,!1);c.type===h.type&&c.animateDrillupTo&&(c.animate=c.animateDrillupTo);b===k.seriesPurgedOptions&&(m=c)};e--;)if(k=b[e],k.levelNumber===c){b.pop();h=k.lowerSeries;if(!h.chart)for(g=f.length;g--;)if(f[g].options.id===k.lowerSeriesOptions.id&&
f[g].options._levelNumber===c+1){h=f[g];break}h.xData=[];k.levelSeriesOptions.forEach(d);y(a,"drillup",{seriesOptions:k.seriesPurgedOptions||k.seriesOptions});m.type===h.type&&(m.drilldownLevel=k,m.options.animation=a.options.drilldown.animation,h.animateDrillupFrom&&h.chart&&h.animateDrillupFrom(k));m.options._levelNumber=c;h.remove(!1);m.xAxis&&(g=k.oldExtremes,m.xAxis.setExtremes(g.xMin,g.xMax,!1),m.yAxis.setExtremes(g.yMin,g.yMax,!1));k.resetZoomButton&&(a.resetZoomButton=k.resetZoomButton,a.resetZoomButton.show())}this.redraw();
0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align();this.ddDupes.length=[];y(a,"drillupall")}};q(n,"afterInit",function(){var a=this;a.drilldown={update:function(b,c){v(!0,a.options.drilldown,b);w(c,!0)&&a.redraw()}}});q(n,"beforeShowResetZoom",function(){if(this.drillUpButton)return!1});q(n,"render",function(){(this.xAxis||[]).forEach(function(a){a.ddPoints={};a.series.forEach(function(b){var c,e=b.xData||
[],f=b.points;for(c=0;c<e.length;c++){var g=b.options.data[c];"number"!==typeof g&&(g=b.pointClass.prototype.optionsToObject.call({series:b},g),g.drilldown&&(a.ddPoints[e[c]]||(a.ddPoints[e[c]]=[]),a.ddPoints[e[c]].push(f?f[c]:!0)))}});D(a.ticks,B.prototype.drillable)})});r.prototype.animateDrillupTo=function(a){if(!a){var b=this,c=b.drilldownLevel;this.points.forEach(function(a){var b=a.dataLabel;a.graphic&&a.graphic.hide();b&&(b.hidden="hidden"===b.attr("visibility"),b.hidden||(b.hide(),a.connector&&
a.connector.hide()))});I(function(){b.points&&b.points.forEach(function(a,b){b=b===(c&&c.pointIndex)?"show":"fadeIn";var e="show"===b?!0:void 0,f=a.dataLabel;if(a.graphic)a.graphic[b](e);f&&!f.hidden&&(f.fadeIn(),a.connector&&a.connector.fadeIn())})},Math.max(this.chart.options.drilldown.animation.duration-50,0));delete this.animate}};r.prototype.animateDrilldown=function(a){var b=this,c=this.chart,e=c.drilldownLevels,f,g=C(c.options.drilldown.animation),d=this.xAxis,h=c.styledMode;a||(e.forEach(function(a){b.options._ddSeriesId===
a.lowerSeriesOptions._ddSeriesId&&(f=a.shapeArgs,h||(f.fill=a.color))}),f.x+=w(d.oldPos,d.pos)-d.pos,this.points.forEach(function(a){var c=a.shapeArgs;h||(c.fill=a.color);a.graphic&&a.graphic.attr(f).animate(u(a.shapeArgs,{fill:a.color||b.color}),g);a.dataLabel&&a.dataLabel.fadeIn(g)}),delete this.animate)};r.prototype.animateDrillupFrom=function(a){var b=C(this.chart.options.drilldown.animation),c=this.group,e=c!==this.chart.columnGroup,f=this;f.trackerGroups.forEach(function(a){if(f[a])f[a].on("mouseover")});
e&&delete this.group;this.points.forEach(function(g){var d=g.graphic,h=a.shapeArgs,m=function(){d.destroy();c&&e&&(c=c.destroy())};d&&h&&(delete g.graphic,f.chart.styledMode||(h.fill=a.color),b.duration?d.animate(h,v(b,{complete:m})):(d.attr(h),m()))})};l&&u(l.prototype,{animateDrillupTo:r.prototype.animateDrillupTo,animateDrillupFrom:r.prototype.animateDrillupFrom,animateDrilldown:function(a){var b=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],c=this.chart.options.drilldown.animation;
this.is("item")&&(c.duration=0);if(this.center){var e=b.shapeArgs,f=e.start,d=(e.end-f)/this.points.length,k=this.chart.styledMode;a||(this.points.forEach(function(a,g){var h=a.shapeArgs;k||(e.fill=b.color,h.fill=a.color);if(a.graphic)a.graphic.attr(v(e,{start:f+g*d,end:f+(g+1)*d}))[c?"animate":"attr"](h,c)}),delete this.animate)}}});z.prototype.doDrilldown=function(a,b,c){var e=this.series.chart,f=e.options.drilldown,d=(f.series||[]).length;e.ddDupes||(e.ddDupes=[]);for(;d--&&!k;)if(f.series[d].id===
this.drilldown&&-1===e.ddDupes.indexOf(this.drilldown)){var k=f.series[d];e.ddDupes.push(this.drilldown)}y(e,"drilldown",{point:this,seriesOptions:k,category:b,originalEvent:c,points:"undefined"!==typeof b&&this.series.xAxis.getDDPoints(b).slice(0)},function(b){var c=b.point.series&&b.point.series.chart,e=b.seriesOptions;c&&e&&(a?c.addSingleSeriesAsDrilldown(b.point,e):c.addSeriesAsDrilldown(b.point,e))})};d.prototype.drilldownCategory=function(a,b){D(this.getDDPoints(a),function(c){c&&c.series&&
c.series.visible&&c.doDrilldown&&c.doDrilldown(!0,a,b)});this.chart.applyDrilldown()};d.prototype.getDDPoints=function(a){return this.ddPoints&&this.ddPoints[a]};B.prototype.drillable=function(){var a=this.pos,b=this.label,c=this.axis,e="xAxis"===c.coll&&c.getDDPoints,f=e&&c.getDDPoints(a),d=c.chart.styledMode;e&&(b&&f&&f.length?(b.drillable=!0,b.basicStyles||d||(b.basicStyles=v(b.styles)),b.addClass("highcharts-drilldown-axis-label"),b.removeOnDrillableClick&&G(b.element,"click"),b.removeOnDrillableClick=
q(b.element,"click",function(b){b.preventDefault();c.drilldownCategory(a,b)}),d||b.css(c.chart.options.drilldown.activeAxisLabelStyle)):b&&b.drillable&&b.removeOnDrillableClick&&(d||(b.styles={},b.css(b.basicStyles)),b.removeOnDrillableClick(),b.removeClass("highcharts-drilldown-axis-label")))};q(z,"afterInit",function(){var a=this,b=a.series;a.drilldown&&q(a,"click",function(c){b.xAxis&&!1===b.chart.options.drilldown.allowPointDrilldown?b.xAxis.drilldownCategory(a.x,c):a.doDrilldown(void 0,void 0,
c)});return a});q(t.Series,"afterDrawDataLabels",function(){var a=this.chart.options.drilldown.activeDataLabelStyle,b=this.chart.renderer,c=this.chart.styledMode;this.points.forEach(function(e){var d=e.options.dataLabels,g=w(e.dlOptions,d&&d.style,{});e.drilldown&&e.dataLabel&&("contrast"!==a.color||c||(g.color=b.getContrast(e.color||this.color)),d&&d.color&&(g.color=d.color),e.dataLabel.addClass("highcharts-drilldown-data-label"),c||e.dataLabel.css(a).css(g))},this)});var A=function(a,b,c,d){a[c?
"addClass":"removeClass"]("highcharts-drilldown-point");d||a.css({cursor:b})};q(t.Series,"afterDrawTracker",function(){var a=this.chart.styledMode;this.points.forEach(function(b){b.drilldown&&b.graphic&&A(b.graphic,"pointer",!0,a)})});q(z,"afterSetState",function(){var a=this.series.chart.styledMode;this.drilldown&&this.series.halo&&"hover"===this.state?A(this.series.halo,"pointer",!0,a):this.series.halo&&A(this.series.halo,"auto",!1,a)})});p(d,"masters/modules/drilldown.src.js",[],function(){})});
//# sourceMappingURL=drilldown.js.map