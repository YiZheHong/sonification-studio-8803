/*
 Highcharts JS v8.0.0 (2020-03-02)

 Data filtering module

 (c) 2010-2020 Highsoft AS
 Author: Oystein Moseng

 License: www.highcharts.com/license
*/
(function(k){"object"===typeof module&&module.exports?(k["default"]=k,module.exports=k):"function"===typeof define&&define.amd?define("highcharts/modules/data-filter",["highcharts"],function(l){k(l);k.Highcharts=l;return k}):k("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(k){function l(n,g,d,f){n.hasOwnProperty(g)||(n[g]=f.apply(null,d))}var d=k?k._modules:{};l(d,"modules/data-filter/DataFilter.js",[d["parts/Utilities.js"]],function(d){function g(c,a,b){return{name:c,execute:a,argumentType:b}}
var n=d.defined,f=d.getNestedProperty;return function(){function c(a,b,m,e){this.key=a;this.argument=m;this.options=e;b&&(this.predicate=c.predicates[b],this.verifyArgumentType())}c.prototype.execute=function(a){var b;if(!this.key||!this.predicate)return!0;a=f(this.key,a);var c=this.argument,e=!(null===(b=this.options)||void 0===b?0:b.caseSensitive);b=function(a){return"string"===typeof a?a.toLowerCase():a};return this.predicate.execute(e?b(a):a,e?b(c):c)};c.getPredicateName=function(a){return c.predicates[a].name};
c.getPredicateArgumentType=function(a){a=c.predicates[a].argumentType;return a===String?"string":a===Number?"number":""};c.prototype.verifyArgumentType=function(){var a,b=this.argument,c=null===(a=this.predicate)||void 0===a?void 0:a.argumentType;if(c&&(null===b||void 0===b?void 0:b.constructor)!==c)throw Error("Highcharts: DataFilter argument not matching predicate type.");};c.predicates={equals:g("Equals",function(a,b){return""+a===b},String),contains:g("Contains",function(a,b){return-1<(""+a).indexOf(b)},
String),startsWith:g("Starts with",function(a,b){return 0===(""+a).indexOf(b)},String),lessThan:g("Less than",function(a,b){return a<b},Number),greaterThan:g("Greater than",function(a,b){return a>b},Number),hasValue:g("Has value",function(a){return n(a)})};return c}()});l(d,"modules/data-filter/PopupDialog.js",[d["parts/Globals.js"]],function(d){var g=d.doc,n=d.win.navigator.userAgent;return function(){function f(c,a,b,m){var e=this;this.parentDiv=a;this.options=m;this.useFlex=!/msie/i.test(n);m=
this.dialogContainer=g.createElement("div");m.className="highcharts-popup-dialog";m.setAttribute("aria-hidden","false");var h=this.flexContainer=g.createElement("div"),p=this.dialogBox=g.createElement("div");p.setAttribute("role","dialog");p.setAttribute("aria-label",c);p.setAttribute("tabindex","-1");p.onkeydown=function(a){27===(a.which||a.keyCode)&&e.hide();a.stopPropagation()};c=this.innerContainer=g.createElement("div");var f=this.contentContainer=g.createElement("div");f.className="highcharts-popup-content-container";
var d=this.closeButton=g.createElement("button");d.setAttribute("aria-label","Close dialog");d.innerHTML=this.getCloseButtonContent();d.className="highcharts-popup-close-button";d.onclick=function(){return e.hide()};this.addDialogStyle();b&&this.setContent(b);c.appendChild(f);c.appendChild(d);p.appendChild(c);h.appendChild(p);m.appendChild(h);a.insertBefore(m,a.firstChild)}f.prototype.setContent=function(c){this.contentContainer.innerHTML="";this.contentContainer.appendChild(c);this.updateDialogPosition()};
f.prototype.show=function(){this.dialogContainer.style.display="block";this.dialogBox.focus()};f.prototype.hide=function(c){void 0===c&&(c=!0);var a;this.dialogContainer.style.display="none";if(c&&(null===(a=this.options)||void 0===a?0:a.onClose))this.options.onClose()};f.prototype.destroy=function(){this.dialogContainer.remove()};f.prototype.updateDialogPosition=function(){this.show();var c=this.parentDiv.clientHeight+"px";this.hide(!1);this.flexContainer.style.height=c;this.useFlex||(this.flexContainer.style.lineHeight=
c)};f.prototype.addDialogStyle=function(){var c=function(a,b){a.style.cssText=b.join(";")};c(this.dialogContainer,["display: none","position: relative","z-index: 9999"]);c(this.flexContainer,["position: absolute","left: 0","right: 0"].concat(this.useFlex?["display: flex","justify-content: center","align-items: center"]:["text-align: center","vertical-align: middle"]));c(this.dialogBox,["outline: none","background-color: #fff","box-shadow: 0 0 10px rgba(0, 0, 0, 0.5)"].concat(this.useFlex?[]:["display: inline-block",
"line-height: initial"]));c(this.innerContainer,["position: relative","padding: 15px"]);c(this.closeButton,"position: absolute;right: 10px;top: 10px;background: none;border: none;padding: 0;cursor: pointer".split(";"))};f.prototype.getCloseButtonContent=function(){return'<svg width="20" height="20" viewBox="0 0 120 120"><path stroke="#4B4B4D" stroke-width="9" stroke-linecap="round"d="M14,14 L106,106 M106,14 L14,106"/></svg>'};return f}()});l(d,"modules/data-filter/DataFilterDialog.js",[d["parts/Globals.js"],
d["modules/data-filter/PopupDialog.js"],d["modules/data-filter/DataFilter.js"]],function(d,g,k){var f=d.doc;return function(){function c(a,b){this.chart=a;this.dialog=new g("Filter data",a.renderTo,null,b)}c.prototype.buildContent=function(a){this.caseSensitive=a.caseSensitive;this.dialog.setContent(this.getDialogContent(a))};c.prototype.show=function(){this.updateTotalPoints();this.dialog.show()};c.prototype.destroy=function(){this.dialog.destroy()};c.prototype.getDialogContent=function(a){this.contentContainer&&
(this.contentContainer.remove(),delete this.contentContainer,delete this.totalPointsElement,delete this.filterKeyElement,delete this.predicateElement,delete this.argumentContainer,delete this.buttonContainer,delete this.argumentElement);var b=this.contentContainer=f.createElement("div");b.appendChild(this.makeHeadingElement());a.showTotalPoints&&(this.totalPointsElement=this.totalPointsElement||this.makeTotalPointsElement(),this.updateTotalPoints(),b.appendChild(this.totalPointsElement));this.argumentContainer=
this.makeArgumentContainer();var c=this.getFilterKeys(a.keys);this.filterKeyElement=this.makeFilterKeyElement(c);b.appendChild(this.filterKeyElement);this.predicateElement=this.makePredicateElement(a.predicates);b.appendChild(this.predicateElement);b.appendChild(this.argumentContainer);a=this.buttonContainer=this.makeButtonContainer();a.appendChild(this.makeApplyButtonElement());a.appendChild(this.makeResetButtonElement());b.appendChild(a);return b};c.prototype.makeHeadingElement=function(){var a=
f.createElement("p");a.style.cssText="font-size: 1.4em; color: #444; margin-top: 5px";a.textContent="Filter data";return a};c.prototype.makeTotalPointsElement=function(){var a=f.createElement("p");a.style.cssText="font-size: 1em; color: #444;";return a};c.prototype.updateTotalPoints=function(){if(this.totalPointsElement){var a=this.chart.getNumPoints(),b=this.chart.getNumPointsVisible();this.totalPointsElement.innerHTML="Currently showing "+b+" of "+a+" data points."}};c.prototype.getFilterKeys=function(a){return a?
a:this.chart.series.reduce(function(a,c){(c.pointArrayMap||[]).forEach(function(b){var c=b.charAt(0).toUpperCase()+b.slice(1);a[b]=c});return a},{})};c.prototype.makeFilterKeyElement=function(a){var b=this,c=this.currentFilterKey=this.currentFilterKey||Object.keys(a)[0],e=f.createElement("select");e.style.cssText="width: 125px; margin: 5px 5px 0 0; font-size: 0.8em; color: #333";e.setAttribute("aria-label","Filter by");Object.keys(a).forEach(function(b){var h=f.createElement("option");h.innerHTML=
a[b];h.value=b;h.selected=c===b;e.appendChild(h)});e.onchange=function(a){b.currentFilterKey=a.target.value};return e};c.prototype.makePredicateElement=function(a){var b=this,c=this.currentPredicate=this.currentPredicate||a[0],e=f.createElement("select");e.style.cssText="width: 125px; margin: 0 5px 0 5px; font-size: 0.8em; color: #333";e.setAttribute("aria-label","Filter operator");a.forEach(function(a){var b=f.createElement("option");b.innerHTML=k.getPredicateName(a);b.selected=a===c;b.value=a;e.appendChild(b)});
this.updateArgumentElement();e.onchange=function(a){b.currentPredicate=a.target.value;b.updateArgumentElement()};return e};c.prototype.makeArgumentContainer=function(){var a=f.createElement("div");a.style.cssText="margin-top: 8px; width: 100%";return a};c.prototype.makeButtonContainer=function(){var a=f.createElement("div");a.style.cssText="width: 100%; margin-top: 10px; text-align: center";return a};c.prototype.makeResetButtonElement=function(){var a=this,b=f.createElement("button");b.style.cssText=
c.buttonStyle;b.innerHTML="Reset";b.onclick=function(){a.chart.clearDataFilter();a.dialog.hide()};return b};c.prototype.makeApplyButtonElement=function(){var a=this,b=f.createElement("button");b.style.cssText=c.buttonStyle;b.innerHTML="Apply";b.onclick=function(){return a.onApplyClick()};return b};c.prototype.updateArgumentElement=function(){var a=this,b,c,e=this.argumentElement,h=this.currentPredicate;h=(h=h&&k.getPredicateArgumentType(h))&&this.getInputTypeFromArgumentType(h);(null===(b=e)||void 0===
b?void 0:b.type)!==h&&(e&&(e.remove(),delete this.argumentElement),h&&(e=this.argumentElement=f.createElement("input"),e.style.cssText="display: block; box-sizing: border-box; margin: 5px auto;width: 100%; font-size: 0.8em; color: #333; padding: 2px 8px;",e.type=h,e.setAttribute("aria-label","Filter value"),e.onchange=function(b){a.currentArgumentValue=b.target.value},e.onkeydown=function(b){13===(b.which||b.keyCode)&&(b.stopPropagation(),b.preventDefault(),a.onApplyClick())},b=this.currentArgumentValue,
h===this.currentArgumentType&&"undefined"!==typeof b?e.value=b:"number"===h&&(e.value="0"),this.currentArgumentType=h,null===(c=this.argumentContainer)||void 0===c?void 0:c.appendChild(e)))};c.prototype.onApplyClick=function(){var a=this.filterKeyElement,b=this.currentPredicate;if(a&&b){a=a.options[a.selectedIndex].value;var c=(this.argumentElement||{}).value;c="number"===k.getPredicateArgumentType(b)&&c?parseFloat(c):c;b=new k(a,b,c,{caseSensitive:this.caseSensitive});this.chart.applyDataFilter(b);
this.dialog.hide()}};c.prototype.getInputTypeFromArgumentType=function(a){return a?"number"===a?"number":"text":""};c.buttonStyle="margin: 5px 10px; width: 100px; padding: 6px 15pxborder-width: 0px; border-radius: 14px; font: inherit; font-size: 14px; font-weight: bold;cursor: pointer; background-color: #25386f; color: #ffffff";return c}()});l(d,"modules/data-filter/options.js",[],function(){return{dataFilter:{enabled:!0,keys:null,predicates:"contains equals startsWith lessThan greaterThan hasValue".split(" "),
showTotalPoints:!0,caseSensitive:!1}}});l(d,"modules/data-filter/langOptions.js",[],function(){return{dataFilter:{dataFilterButtonText:"Filter data. {chartTitle}"},filterDataMenuText:"Filter data"}});l(d,"modules/data-filter/data-filter.js",[d["parts/Globals.js"],d["modules/data-filter/DataFilter.js"],d["modules/data-filter/DataFilterDialog.js"],d["modules/data-filter/options.js"],d["modules/data-filter/langOptions.js"],d["parts/Utilities.js"]],function(d,g,l,f,c,a){var b=a.addEvent,m=a.extend,e=
a.merge;e(!0,d.defaultOptions,f,{lang:c});d.DataFilter=g;d.Chart.prototype.applyDataFilter=function(a){this.series.forEach(function(b){b.setVisible(!0,!1);b.points.forEach(function(b){var c=a.execute(b);b.visible!==c&&(b.setVisible?b.setVisible(c,!1):b.update({visible:c},!1))})});this.redraw()};d.Chart.prototype.clearDataFilter=function(){var a=new d.DataFilter;this.applyDataFilter(a)};d.Chart.prototype.showDataFilterDialog=function(){var a=this,b={onClose:function(){var b,c=null===(b=a.accessibility)||
void 0===b?void 0:b.components.infoRegions.announcer;b=a.getNumPointsVisible();var d=a.getNumPoints();c&&(c.announce("Dialog closed. Currently showing "+b+" of "+d+" data points."),c=a.renderer.box,c.hasAttribute("tabindex")||c.setAttribute("tabindex","-1"),c.focus())}};b=this.dataFilterDialog=this.dataFilterDialog||new l(this,b);var c=this.options.dataFilter;c&&(b.buildContent(c),b.show())};d.Chart.prototype.getNumPointsVisible=function(){return this.series.reduce(function(a,b){b=b.points.reduce(function(a,
b){return a+(b.visible?1:0)},0);return a+b},0)};d.Chart.prototype.getNumPoints=function(){return this.series.reduce(function(a,b){return a+b.points.length},0)};b(d.Chart,"update",function(a){(a=a.options.dataFilter)&&e(!0,this.options.dataFilter,a)});if(g=k.getOptions().exporting)m(g.menuItemDefinitions,{filterData:{textKey:"filterDataMenuText",onclick:function(){this.showDataFilterDialog()}}}),g.buttons&&g.buttons.contextButton.menuItems.push("filterData")});l(d,"masters/modules/data-filter.src.js",
[],function(){})});
//# sourceMappingURL=data-filter.js.map